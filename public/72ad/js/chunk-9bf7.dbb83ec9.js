(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9bf7"],{"3d71":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("Card",{attrs:{shadow:""}},[e("div",[e("Form",{ref:"editTempateForm",attrs:{model:t.formdata,rules:t.rules,"label-width":100}},[e("FormItem",{attrs:{label:"模板ID"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",readonly:""},model:{value:t.formdata.id,callback:function(a){t.$set(t.formdata,"id",a)},expression:"formdata.id"}})],1),e("FormItem",{attrs:{label:"所属行业",prop:"industry_id"}},[e("Select",{staticStyle:{width:"200px"},model:{value:t.formdata.industry_id,callback:function(a){t.$set(t.formdata,"industry_id",a)},expression:"formdata.industry_id"}},t._l(t.industry,function(a){return e("Option",{key:a.id,attrs:{value:a.id}},[t._v(t._s(a.name))])}))],1),e("FormItem",{attrs:{label:"模板名称",prop:"name"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"模板名称",maxlength:100},model:{value:t.formdata.name,callback:function(a){t.$set(t.formdata,"name",a)},expression:"formdata.name"}})],1),e("FormItem",{attrs:{label:"模板描述",prop:"description"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"textarea",placeholder:"模板描述",maxlength:500},model:{value:t.formdata.description,callback:function(a){t.$set(t.formdata,"description",a)},expression:"formdata.description"}})],1),e("FormItem",{attrs:{label:"网站ID",prop:"site_id"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"网站ID"},model:{value:t.formdata.site_id,callback:function(a){t.$set(t.formdata,"site_id",a)},expression:"formdata.site_id"}})],1),e("FormItem",{attrs:{label:"页面ID",prop:"page_id"}},[e("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"页面ID"},model:{value:t.formdata.page_id,callback:function(a){t.$set(t.formdata,"page_id",a)},expression:"formdata.page_id"}})],1),e("FormItem",{attrs:{label:"演示地址",prop:"demo_url"}},[e("Input",{staticStyle:{width:"400px"},attrs:{type:"text",placeholder:"演示地址"},model:{value:t.formdata.demo_url,callback:function(a){t.$set(t.formdata,"demo_url",a)},expression:"formdata.demo_url"}})],1),e("FormItem",{attrs:{label:"状态",prop:"status"}},[e("Select",{staticStyle:{width:"200px"},model:{value:t.formdata.status,callback:function(a){t.$set(t.formdata,"status",a)},expression:"formdata.status"}},[e("Option",{attrs:{value:1}},[t._v("启用")]),e("Option",{attrs:{value:0}},[t._v("禁用")])],1)],1),e("FormItem",{attrs:{label:"是否空白",prop:"is_blank"}},[e("RadioGroup",{model:{value:t.formdata.is_blank,callback:function(a){t.$set(t.formdata,"is_blank",a)},expression:"formdata.is_blank"}},[e("Radio",{attrs:{label:1}},[e("span",[t._v("是")])]),e("Radio",{attrs:{label:0}},[e("span",[t._v("否")])])],1)],1),e("FormItem",{attrs:{label:"模板类型",prop:"device_type"}},[e("RadioGroup",{model:{value:t.formdata.device_type,callback:function(a){t.$set(t.formdata,"device_type",a)},expression:"formdata.device_type"}},[e("Radio",{attrs:{label:"1"}},[e("span",[t._v("手机")])]),e("Radio",{attrs:{label:"2"}},[e("span",[t._v("广告屏")])])],1)],1),e("FormItem",{attrs:{label:"图片",prop:"image"}},[e("Input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:t.formdata.image,callback:function(a){t.$set(t.formdata,"image",a)},expression:"formdata.image"}}),e("input",{ref:"imagefile",attrs:{type:"file",accept:"image/*"},on:{change:function(a){t.selectedFile()}}}),t.imagepath?e("img",{staticStyle:{"max-width":"200px",display:"block","margin-top":"10px"},attrs:{src:t.imagepath}}):t._e()],1),e("FormItem",[e("Button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)])},i=[],d=(e("7f7f"),e("c93e")),s=(e("cadf"),e("551c"),e("097d"),e("2f62")),o=e("66df"),l={name:"template_edit_page",data:function(){return{formdata:{id:this.$route.query.id,name:"",description:"",site_id:0,page_id:0,demo_url:"",status:1,industry_id:1,image:null,is_blank:0,device_type:1},industry:[],imagepath:"",rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],site_id:[{required:!0,pattern:/^\d+$/,message:"网站ID不能为空",trigger:"blur"}],page_id:[{required:!0,pattern:/^\d+$/,message:"页面ID不能为空",trigger:"blur"}],demo_url:[{required:!0,message:"演示网址不能为空",trigger:"blur"}],image:[{required:!0,message:"图片不能为空",trigger:"blur"}]}}},computed:{},methods:Object(d["a"])({},Object(s["d"])(["closeTag"]),{changeExTime:function(t){this.formdata.expiry_at=t},handleCloseTag:function(){this.closeTag({path:"/template/edit",query:{siteid:this.$route.query.siteid}})},loadIndustry:function(){var t=this,a="/shop/sysmanage/template/industry",e={};o["a"].request({url:a,data:e,method:"post"}).then(function(a){t.industry=a.data.data.list})},selectedFile:function(){var t=this,a=new FileReader,e=this.$refs.imagefile.files[0];a.readAsDataURL(e),a.onloadend=function(a){t.imagepath=a.target.result,t.formdata.image=t.imagepath}},loadInfo:function(){var t=this,a="/shop/sysmanage/template/info",e={id:this.$route.query.id};o["a"].request({url:a,data:e,method:"post"}).then(function(a){200==a.data.code?(t.formdata.id=a.data.data.id,t.formdata.industry_id=a.data.data.industry_id,t.formdata.name=a.data.data.name,t.formdata.description=a.data.data.description,t.formdata.site_id=a.data.data.site_id,t.formdata.page_id=a.data.data.page_id,t.formdata.demo_url=a.data.data.demo_url,t.formdata.status=a.data.data.status,t.formdata.image=a.data.data.image,t.formdata.is_blank=a.data.data.is_blank,t.formdata.device_type=a.data.data.device_type,t.imagepath="/sysdata/template/"+t.formdata.image):t.$Message.error(a.data.msg)})},handleSubmit:function(){var t=this;this.$refs["editTempateForm"].validate(function(a){if(a){var e="/shop/sysmanage/template/edit",r=new FormData;for(var i in t.formdata)"image"!=i&&r.append(i,t.formdata[i]);t.$refs.imagefile.value&&r.append("image",t.$refs.imagefile.files[0]),o["a"].request({url:e,data:r,method:"post"}).then(function(a){200==a.data.code?(t.$Message.success("修改成功"),t.handleCloseTag(),t.$router.push({path:"/template/index"})):t.$Message.error(a.data.msg)})}else t.$Message.error("请完整填写表单!")})}}),mounted:function(){this.loadIndustry(),this.loadInfo()}},n=l,m=(e("f51f"),e("2877")),p=Object(m["a"])(n,r,i,!1,null,null,null);p.options.__file="edit.vue";a["default"]=p.exports},5288:function(t,a,e){},f51f:function(t,a,e){"use strict";var r=e("5288"),i=e.n(r);i.a}}]);