(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6325"],{"300e":function(t,e,a){},"66c7":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{shadow:""}},[a("div",[a("Form",{ref:"addtplform",attrs:{model:t.formdata,rules:t.rules,"label-width":100}},[a("FormItem",{attrs:{label:"所属行业",prop:"industry_id"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.formdata.industry_id,callback:function(e){t.$set(t.formdata,"industry_id",e)},expression:"formdata.industry_id"}},t._l(t.industry,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),a("FormItem",{attrs:{label:"模板名称",prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"模板名称",maxlength:100},model:{value:t.formdata.name,callback:function(e){t.$set(t.formdata,"name",e)},expression:"formdata.name"}})],1),a("FormItem",{attrs:{label:"模板描述",prop:"description"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"textarea",placeholder:"模板描述",maxlength:500},model:{value:t.formdata.description,callback:function(e){t.$set(t.formdata,"description",e)},expression:"formdata.description"}})],1),a("FormItem",{attrs:{label:"网站ID",prop:"site_id"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"网站ID"},model:{value:t.formdata.site_id,callback:function(e){t.$set(t.formdata,"site_id",e)},expression:"formdata.site_id"}})],1),a("FormItem",{attrs:{label:"页面ID",prop:"page_id"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",placeholder:"页面ID"},model:{value:t.formdata.page_id,callback:function(e){t.$set(t.formdata,"page_id",e)},expression:"formdata.page_id"}})],1),a("FormItem",{attrs:{label:"演示地址",prop:"demo_url"}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"text",placeholder:"演示地址"},model:{value:t.formdata.demo_url,callback:function(e){t.$set(t.formdata,"demo_url",e)},expression:"formdata.demo_url"}})],1),a("FormItem",{attrs:{label:"状态",prop:"status"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.formdata.status,callback:function(e){t.$set(t.formdata,"status",e)},expression:"formdata.status"}},[a("Option",{attrs:{value:1}},[t._v("启用")]),a("Option",{attrs:{value:0}},[t._v("禁用")])],1)],1),a("FormItem",{attrs:{label:"是否空白",prop:"is_blank"}},[a("RadioGroup",{model:{value:t.formdata.is_blank,callback:function(e){t.$set(t.formdata,"is_blank",e)},expression:"formdata.is_blank"}},[a("Radio",{attrs:{label:"1"}},[a("span",[t._v("是")])]),a("Radio",{attrs:{label:"0"}},[a("span",[t._v("否")])])],1)],1),a("FormItem",{attrs:{label:"模板类型",prop:"device_type"}},[a("RadioGroup",{model:{value:t.formdata.device_type,callback:function(e){t.$set(t.formdata,"device_type",e)},expression:"formdata.device_type"}},[a("Radio",{attrs:{label:"1"}},[a("span",[t._v("手机")])]),a("Radio",{attrs:{label:"2"}},[a("span",[t._v("广告屏")])])],1)],1),a("FormItem",{attrs:{label:"图片",prop:"image"}},[a("Input",{staticStyle:{display:"none"},attrs:{type:"text"},model:{value:t.formdata.image,callback:function(e){t.$set(t.formdata,"image",e)},expression:"formdata.image"}}),a("input",{ref:"imagefile",attrs:{type:"file",accept:"image/*"},on:{change:function(e){t.selectedFile()}}}),t.imagepath?a("img",{staticStyle:{"max-width":"200px",display:"block","margin-top":"10px"},attrs:{src:t.imagepath}}):t._e()],1),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)])},i=[],s=a("c93e"),d=(a("cadf"),a("551c"),a("097d"),a("2f62")),o=a("66df"),l={name:"template_add_page",data:function(){return{formdata:{name:"",description:"",site_id:0,page_id:0,demo_url:"",status:1,industry_id:1,is_blank:0,device_type:1},industry:[],imagepath:"",rules:{name:[{required:!0,message:"名称不能为空",trigger:"blur"}],site_id:[{required:!0,pattern:/^\d+$/,message:"网站ID不能为空",trigger:"blur"}],page_id:[{required:!0,pattern:/^\d+$/,message:"页面ID不能为空",trigger:"blur"}],demo_url:[{required:!0,message:"演示网址不能为空",trigger:"blur"}],image:[{required:!0,message:"图片不能为空",trigger:"blur"}]}}},mounted:function(){this.loadIndustry()},computed:{},methods:Object(s["a"])({},Object(d["d"])(["closeTag"]),{changeExTime:function(t){this.formdata.expiry_at=t},handleCloseTag:function(){this.closeTag({path:"/template/add"})},loadIndustry:function(){var t=this,e="/shop/sysmanage/template/industry",a={};o["a"].request({url:e,data:a,method:"post"}).then(function(e){t.industry=e.data.data.list})},selectedFile:function(){var t=this,e=new FileReader,a=this.$refs.imagefile.files[0];e.readAsDataURL(a),e.onloadend=function(e){t.imagepath=e.target.result,t.formdata.image=t.imagepath}},handleSubmit:function(){var t=this;this.$refs["addtplform"].validate(function(e){if(e){var a="/shop/sysmanage/template/add",r=new FormData;for(var i in r.append("image",t.$refs.imagefile.files[0]),t.formdata)r.append(i,t.formdata[i]);o["a"].request({url:a,data:r,method:"post"}).then(function(e){200==e.data.code?(t.$Message.success("添加模板成功"),t.handleCloseTag(),t.$router.push({path:"/template/index"})):t.$Message.error(e.data.msg)})}else t.$Message.error("请完整填写表单!")})}})},n=l,m=(a("b899"),a("2877")),p=Object(m["a"])(n,r,i,!1,null,null,null);p.options.__file="add.vue";e["default"]=p.exports},b899:function(t,e,a){"use strict";var r=a("300e"),i=a.n(r);i.a}}]);